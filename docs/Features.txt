Directed Visual System (DViz)

Release 1.0 Feature Target List
----

Networked Players
Slide Groups
Playlists
Live cameras
Video backgrounds
DVD
Bible text


-----

Revised Task list for Release 1.0, 10/18/09:
	----------------------------
	"Tasty Breakfast" Release
	----------------------------
	Target Use Cases: 
	Songs, Announcements, Sermon
	----------------------------
	
	- Models:
		[DONE] - Song Database Model
			[DONE] - SQLite Backend 
	- Logic:
		[DONE] - Translator/Slide Generator
			[DONE] - Given a Song, translate into a slide group
	- UI:
		[DONE] - List of forms needed:
			[DONE] - "Grid and Guidelines" Form
			[DONE] - Slide Group settings (aspect ratio, etc)
				[LATER] aspect ratio per slide
			[DONE] - Song Editor
		[DONE] - SongDatabase List View
			- One column
			#- Three columns:
			#	- Title, #, Tags (Chorus, Hymn, etc)
		[DONE] - Search Function:
			[NOT IMPL] - Default to Full Text, Sort by Title
				- only implemented title search, but can match any part of title and can use wildcards
			#- Title
			#- Name
			#- Full Text
		[DONE] - Random access viewer control
			[DONE] - Just do it
			[DONE] - Should be "smart" - for songs, render differently than generic slide groups
			[DONE] - Go by Group Type?
		[POSSIBLY LATER] - In-flight edits
			- need to add specific framework for this
	- Visuals:
		[DONE] - Add Aspect Ratio setting
		[DONE] - Text Centering in a Text Box
		[DONE] - Cross Fade on Changing Slide
			[DONE] - Important Point:
				[DONE] - Need to abstract video source/decoder to a "singleton" 
				[DONE] - Once source/decoder for that file per program
			[DONE] - When slide*Group* is set on scene, need to scan and initalize decoders for all videos, but STOP at first frame
			[DONE] - When cross fade starts, start playing
			[DONE] - Stop playing prev slide when cross fade ends
			[DONE] - Dont Release provider unless slide group is taken off scene?
		[DONE] - Shadows (Text):
			[DONE] - Can settle for simple block shadow
			[LATER] - Gausian blur if we have time 
		[DONE] - Backgrounds:
			[DONE] - Add background item type & Position automatically, Disable movement
			[DONE] - Still cant set item color/props with config box
		[DONE] - Undo/redo framework
			- Must have this for sermons and announcment slides
		[DONE] - Snap to grid support
		[DONE] - Increse/decrease size of font from toolbar - needed for sermon/announcment
		[DONE] - Copy/paste or duplicate slides
		[DONE] - Image Item
		[DONE] - SVG Item if we have time
			internal to image item
		[DONE] - Layout asissts - center objects vert/horz
			- need hint for this (e.g. songs) to auto adjust - maybe?
			- should be easy - have toolbar, just add actions and a slot, do calcs, set position
		[LATER] - Gradients - can settle for making gradients in gimp and import as photo, but need to eventually have support direclty in dviz
		
	
	- Improvements:
		
		[DONE] When searching for song, auto select first result
			setCurrentIndex() doesnt seem to be working
		[HOLD] Crop handles should be easy - as move left in, move X out. Basically keep the image rect the same (or add negative offsets)
			not as easy as it looks!
			not a show stopper right now, move to later release
			
		= Main UI =
			Add slide pallette
			
			[DONE] Add song template palette
				no support for stored song templates right now in models right now
				not a show stopper right now
			
			[DONE] Add video pallette
			[DONE] Add image palette
			[LATER] Add drag/drop background for songs from a yet-to-be-made vid/image bg pallette
				have buttons to do this right now, D&D can come later
		
		= Editor / Visual =
			[HOLD] Add rounded rectangle item / or round boxcontent corners
				Added rounding code to visual delegate
				Still need to add rounding to model and to config UI
				Later, need to focus on songs now.
			add animation to image items
		
		= Songs =
			Need to have a reset template button
			
			[DONE] Add song verse view below song list in main window
			[DONE] Need song new/edit/delete functionality
			[LATER] Save song templates/bg in a "template collection"
			[LATER] Auto-sizing song text should be an option that can be enabled/disabled
				if not autosize, pull size from template / textobx
			[LATER] option of font family should be available for song
				should it pull from textbox?
				should be easy to extract using text cursor - see model/TextItem.cpp - findFontsize() method
			[LATER] Need to add drag-drop from song list to song group
		
		= Outputs =
			[LATER] Prompt to save custom output location on close
				not a show stopper right now
				
			Add outputview objects to encapsulate slidegroupviewer or network client/server
			On first start, intelligently detect aspect ratio of primary output - if no primary out, create small custom rect in top right
		
		= TODAY =	
			[DONE] media browser remember index
			[DONE] progress dialog framework for deep operations
			[DONE] insert plain text from rich
				added toolbar icon to do it since I couldn't get CTRL+V to overide
			[DONE] autosave toolbar
			[DONE] fix icon
			[DONE] fix fitting algorithm
			look at smooth pub
			look at text import tool
			look at images rendering gray
			
			
			[DONE] media browser preview
				need file preview widget below media browser
					click once on file to preview
	
			[DONE] master slide
		
			[DONE] text work
				[LATER] do need vertical line spacing for artistic use in desigining slides
				[LATER] make textboxitem honor colors other than black set using char format
				[DONE] rich text editor should accept only plain text mime type and assume current formatting
					added toolbar icon to do it since couldnt get CTRL+V override
				[DONE] text toolbar vs rich editor in config box dont agree - config box doesnt pick up same text size
				[DONE] when changing text using tooplbar icons, need to update prop dock with new html 
				[DONE] rich text editor should allow manually typed point sizes
				[DONE] need an autofit textbox btn
				[DONE] and an autosize textbox
				[DONE] text import tool:
					grab text file 
					go thru file, grab 6 lines at a time
					try to get to be at least 45 - 50 px high
					drop lines back to next batch till at least 45px high
					create slides as you go
				
					
			images work
				large nbr of photos imported using import tool - some of them render gray - caching issues?
				add progress bar to image import tool
				add timeout, titling options to image import tool
				when loading slide group with lots of image, UI freezes for too long
					this is due to the loading of images in the image item 
					which is due to the creating of slide pixmaps
					need someway to delay-create the slide pixmaps
					while were on it, delay-creat the group pixmaps as well
					since cant render qpixmaps outside gui thread, maybe something like:	
						in generatepixmap:
							setup mygraphicsscene with slide
							ask scene if ready to render
								this would require us to delay loading the image item for a split second
								scene would ask each abstractcontent if canrender
							if no, then queue the pixmap for render later and return gray pixmap
							recheck again in X ms (10 ms)
								if still no, queue again
								render anyway after X ms (2000ms ? )
						call gui process events every time thru generatepixmap ?
							
				images import tool maybe should use different file browser dialog - because on win32, its that directory tree dialog with no field to type in - I hate that dialog
		
			misc:
				make a background "apply to all" button
				[DONE] make autosave - on/off from toolbar
				[DONE] make autosave time configurable via app settings
				
				when switching background to video, somehow render the previous background video UNTIL the first frame of the next video is ready
				
				bug in text import tool: some slides imported move box all the way to the left
				
			
			
		= Misc = 
			[MAYBE] Add color theme support vis a vi powerpoint
		
			[STARTED] need to pre-render all text boxes
				does it in song groups
			add generic pre-render on document load 
				loop thru every group, every slide and call Paint on every visual delegate
				
			add web newsticker item
				can use CSV or XML file as data source
			add countdown item
			
			[STARTED] would be nice: while editing slide thats live, if change, cross fade to changed version
			[DONE] media browser - when "going back" or "going up", should remeber the last selected index
			
			need video controls - at least in media browser preview
				would be nice to integrate into slideviewcontrol
			
			[STARTED] port over the song database conversion code to windows
				compiles pxxmlexport (pxtools) on win32 - doesnt execute
				need to integrate it into a dialog in dviz
			
			
			[STARTED] add image slideshow group type
				or group "generator" / importer?
					[DONE] added importer under MainWindow::imageImportTool()
				like what powerpoint has - but:
					- ppt displayes NO progress dialog or bar when reading large image lists (just a busy cursor)
					- generating the slides takes a LONG time in ppt once you click CREATE
					- powerpoint does NOT automatically set the LOOP SLIDE SHOW *or* an intelligent per slide auto-change time
			
			make slide list model zoomable 
				e.g. zoom slide list in editor
				zoom slide list in control
				zoom doc list in main window
			
			
			add network viewer client
				for viewer, client or server doesnt matter
					probably should start with client and remove the :server: option from the output dialog for now
					then Dviz control is the server
				expected opts:
					pretty much all public operations of SlideGroupViewer.h
					will need a group viewer network proxy to reside in control, then proxy calls out to the client
					no calls from client back into the control that I know of
					** Will have to send appsetting changes over the network ...
						or should appsettings be local to the client??
					** Will have to send apsect ratio changes over the line
				[DONE] need to find ops in control that rely on calling the public view() or scene() methods
					[DONE] best way may be just to move those methods private :-)
					
			[DONE] add mjpeg output feed (server) with configurable FPS / quality for compat with vidblaster
				use widget topixmap routine?
				or mygracphisview topixmap?
				or mygraphicscene topixmap?
				should be function in slidegroupviewer (basically, a clone output option)
					multithreaded - compress frame jpeg once, then offer to all clients
				hacked a bit right now - just does foldback - maybe more later
				less hackish now - settings to configure in OutputSetupDialog
			
			[LATER] make an output MJPEG-only (e.g. no need for visible widget)
				subclass of the network output
				no need for custom dviz viewer on other end
				need to render that as a "viewer" widget though - could take view from that
				right now, added stayOnTop flag to custom output and MJpeg Server settings, so could setup custom output
					as mjpeg feed and just put it behind other windows
			
		
		[LATER] add blackberry remote control interface
			two part:
				server side code in dviz
				client side code on bb - java 
			communicate using json
				need to find midp-compat json class for java
			this would be client calling ops on server
			and server sending:
				list of groups
				current group idx
				list of slides in current group
				current slide in group
				
				group title (+icon??)
				slide #, slide text, (+icon??)
				
				event: slide change, group change, pause/play
				
			client sending:
				next slide
				prev slide
				set slide #
				black 
				clear
				pause
				play
				set group#
				
		[REJECTED] synced outputs should not show in list of "send to" outputs
				decided that this is false
		
		[LATER] animation framework
			each item on slide gets own 'channel' on timeline
			channels sorted by Z-order (top channel - top item)
			length of item on timeline is "life" of item
			default start/end of life - appear/dissappear (setVisible)
			allow for enterenace/exit effects: fade in, fade out, others...
			keyframed animation:
				when moving to spots on timeline, move items properly to the spot they would be in live view
				indicate keyframes on timeline with dots or something
				allow keyframes to EASILY be deleted from timeline (click + drag off, click+delete, rightlick+delete)
				allow to click keyframe to jump to that spot on timeline
				to add keyframe to anim, move to spot on timeline, then move item to new spot
					if current spot on timeline already has keyframe, update that keyframe instead
				store keyframes as list of: QMap<$itemId, QMap<$propertyName, $propertyValue>>
				keyframes are PER item, not per spot on timeline
				many items can have keyframe at single spot...right? or should they be per spot on timeline? think on it
			some items have builtin length - like video
				videos that can be looped have infinite length - e.g. they can be resized on the timeline as long as you want
				regular videos have X length and cant go past that
				need to add flag to VideoFileItem for "bool looped"
			
		[LATER] Add zooming toolbar to slide group editor
				not a show stopper
			
		[LATER] cross fade set background ops on live group
			not a show stopper right now
		
		[REJECTED] set default on groups to go to next slide
			dont do this until fixing segfault bug when doing going next group / first slide to song group
	
		[LATER] allow multiple select in media browser (e.g. multiple images)
		[LATER] add preview pane to media browser
		
		[LATER] Consider moving opengl option to a per-output setting
			not a show stopper right now
		[REJECTED] Consider making Output objects QObjects that can emit signals when changed
			I dont want the outputs changing while changing options on dialog, only when saved. So rely on mainwindow signals
	
		[LATER] Move dialogs into their own subfolder in the source tree
			not a show stopper right now
			
		[LATER] Move qt color dialog into 3rdparty
			not a show stopper right now
		
		[LATER] add next/prev btns to preview widget
			not a show stopper right now
		
		[LATER] alter shadows options from x/y offset to angle + distance (keep btns)
			not a show stopper right now
			
		[LATER] start docks on left (?maybe?)
			not a show stopper right now
		
		[LATER] delete key in group list should delete (with prompt) current group
			already does CTRL+D
			maybe later
		
		[LATER] is there a way to make the live output not show up in task list???
			see http://lists.trolltech.com/qt-interest/2007-07/thread00362-0.html for discussion on the opposite problem
			not a show stopper right now
		
		[LATER] fonts in the program settings dialog still are incongruant sizes between all boxes
			not a show stopper right now
		
		[LATER] future: investigate midi area with auto aranging/tiling of windows
		
		[LATER] make selection in editor "smarter" 
			maybe by implementing better shapes for items
			e.g. convert text to painter path somehow and return as shape...maybe...
			
		[LATER] offer "advanced" text item (restore old text layout code) that can do advanced font letter spacing, etc
			or maybe there is someway to adjust letter spacing in Qt's code?
			QTextCharFormat does offer horizontal letter spacing...
			custom vertical letter spacing could be achieved by a custom layout - see qq24: http://doc.trolltech.com/qq/qq24-textlayouts.html
		
		[LATER] make font size buttons use different algorithim for sizing fonts
			e.g. < 22, inc by 2
			from 22-44, inc by 4
			44-80, inc by 6
			8-100, inc by 8
			100-130, inc by 10
			130>, inc by 25??
			or some form of exponential, rounded percentage inc? (e.g. (int)(cur size * 1.5)) ?
		
		
		
		[FIXED] song text looks like its not centering correctly - check it out
			due to the fact that we automatically create templates, we had to find a different way to decide to auto-center or not
			changed to check to see if textbox was the same size as the screen - if so, then center the box
		
		[LATER] rewrite dirmodel inorder to delay-load icons
			cant delay load icons yet due to qlistview not repainting properly - reported on qt-interest
		[DONE] allow slide & group fade settings to override OutputControl
		[LATER] add checkbox to outputcontrol to force-override fade settings
		[DONE] change "play" button in view control to "start" - when anim framework added, it can be called "play" again
		
		[FIXED] cloning text objects looses the original font size even tho we copy the html
			
		[DONE] integrate the proper song filter/song generator code for foldback displays
		[DONE] make filters and auto-size text code applicable to non-synced outputs as well
			
		[DONE] offer more filter types for outputs
			[DONE] at start, offer builtin filters:
					foreground only
					text only
					background only
					[LATER/NA] video only
					non-text only
			[LATER] offer user-designed filters:
				- scripted filter?
		
		[DONE] allow user to choose only-text background color
		[DONE] new document AR still not correct in the icons
		[DONE] changing model doesnt update slidegrouplistmodel icons
		[DONE] need to save clear/black state across changing songs (e.g. clear at end of one song, set new song, needs to fade new background/new clear slide)
		[DONE] need to add checkbox to song editor window to save back to database
		[DONE] after editing a song in database, it needs to update the lyrics preview widget below
		[DONE] need to store song background choices that were set using media browser
			[DONE] make it auto-create a template, set bg on the template?
		[DONE] generalize the filters code [e.g. filter plugin somehow, more than just text only]
			filters are generalized, just need to integrate with UIfs
		[FIXED] up arrow in media browser doesnt work on win32
			canonical path in QFileInfo still usedd '/' as the dir seperator on windows, even though QDir::separator() returns "\" - grrr!
		
		[REJECTED] need to find a way to make the fade speed slider "snap to" increments of, say, 5%
			can't seem to find out how
		[DONE] fade speed slider should apply to black/clear fades as well 
		[DONE] need to add kbd shortcuts to song list "clear" button and to the song editor "title" field
		[FIXED] investigate cross fading on synced outputs - seems to NOT cross fade, BUT I never told it NOT to...huh...
			after watching it, it looks like the sync-signal sets the NEW slide without cross fade, THEN it tries to cross fade to the new slide - resulting in meerly a slight dimming effect for a moment
				which is better than nothing, but ideally it should NOT cross fade
				but this points to a possible problem - setting the slide with no fade, then setting again with cross fade - still need to investigate
			update:
				seems to only do the "dim fade" (prev update) when text-only filter enabled
				with no text-only filter, cross fades like normal
			update:
				it was a case of not disconnecting correctly from m_syncInst in OutputControl
				
		
		[DONE] need to be able to preview slides (next/prev button)
			[DONE] move preview dock to under the group list - simple slide list model + preview window
		[DONE] start with overlay disabled
		[DONE] max fade speed slider needs to be greater
			Bumped max to 2000ms (2sec)
		[DONE] double-clicking on preview slide should go live with that slide
		[DONE] draw black line (dotted?) between slides in song list model
		[DONE] preview control needs to change viewcontrols correctly
		
		[DONE] when cloning items, MUST set ID and itemname in the abstractitem::clone() method!!
		
		[DONE] need to find a dviz icon
		[DONE] move the "send to output" part of the mainwindow splitter as a combobox+btn over the group list (checkable combobox)
			cant figure out how to do checkable combox, so used list of qcheckboxes
		[DONE] put next/prev btns in ctrl over on left, play btn on right
		[DONE] need to update combobox in syncwidget to "sync" staet when setting outputcontrol sync'd progratically
		[DONE] stop autosave timer when editor closes
			
		[DONE] the slide list icons reallly need to be clearer and rendered better
		[DONE] put next/prev controls on slide view control right next to each other
		[DONE] change key combo for "next" (now is 't')
			original rev for this note said 'now is 'x'' - it really was 't', just had a brain fart - sorry.
		
		[DONE] multioutputs:
			[DONE] when outputting to only one output, need to keep live tab in same place
				change to OutputInstance which embeds SlideGroupViewControl
			[DONE] enable cross fade slider with similar math algorihm to the editor window
			
			[DONE] add synced support 
				using qstackedwidget, change output control to sync options
					- sync with what:
						- which output - combo box drop down
					- filter or no filter
					- template overlay option (select a slide group to overlay on top of or behind)
					- auto-size test options:
						- if only one text box found on slide, max fill to screen and max font size like in song
						- or only first text box - or only "top" text box - i think songs use top box from template
		
		[DONE] make document icons render "smoother" at the small size 
				render directly using the given painter in TextBoxContent instead of caching the results of scene hint is Preview
	
		[DONE] setup editor to zoom mygraphicsscene automatically ONLY when opening window, not when resizing during use
		[DONE] slide props dock should current tab to prev tab index IF titles match at that index
		[DONE] add shadow transparency slider which just adjusts the alpha channel of the color
		[DONE] add a "zero offset" shadow preset btn
		[DONE] make preview widget zoom to min width, not max height
		[DONE] integrate media browser with background setting and add video / image group
		[DONE] when changing directory in media browser, focus on list
		[DONE] when adding item to document, set selected index
		[DONE] when removing groups from doc, set sel idx
		[DONE] slide editor needs to set disabled slider
		[DONE] check defaults for inherit cross fade settings on groups
		[DONE] add custom icons (preview icons) to mbrowser
		[DONE] add current directory label to media browser
		[DONE] add combobox filter to media browser
		
		[DONE] Global cache pixmaps of doc/slide lists 
		
		[DONE] set object names on the toolbars in slide editor window
		[DONE] adding new group to grou p list should put it at the top /bottom of the list - not middle!
		[DONE] add seperator before group delete icon in toolbar
			moved properties icon over one
			
		[LATER] Adapt genericitemconfig dialog to work on model item only without having to use the visual delegate
			not needed right now, we can create abstractcontent delegates for the dialog if neeeded
		[LATER] add test alignment (left/right/center) to toolbar
			now that we have the settings widgets integrated as a dock in the editor and it auto-changes to text config when text selected, we may not need this in toolbar
	
		[DONE] make cross fade speed configurable on a per slide or per slide GRoup basis (e.g for songs)
		[DONE] add slide timeout widgets to toolbar
		[DONE] add slide bg config btn to toolbar
			
		[DONE] add pixmap cache size option to program settings dialog
		[DONE] add crossfade speed and quality options to program settings dialog
			
		[DONE] Integrated grid dialog into slideeditor window
		[DONE] selection panel

		[DONE] move/add item config to a dock widget
			
		[DONE] when editor going to new slide and only one item in slide, select that item
				actually, we make the top-most (zvalue) item selected
		[DONE] modified SlideEditorWindow to use setcurrentslide internally instead of setslidegroup to change current slide for editing operations
		[DONE] fix graphics scene so dont have to press CTRL+(key) to move items
		[DONE] in editor, make PGUP/PGDOWN change slides
		[DONE] when pressing f5 to go live in editor, should prompt if you want to enable auto change timer for this slide or not
				feels kinda hack-ish right now - I just prompt the user to enable/disable timer if time is set
				if user says No, disable timer - then I set the timeout on the slide model to 0, show the slide, and then set time on slide back to orig time
				feels kinda hackish-but it works and I dont see any negative side effects (yet)
					
		[DONE] pressing f2 in slide editor when focus in slide list should open slide prop dialog box
		[DONE] when pressing F2 and group is live, should start editor on lvie slide
		[DONE] add btn to slide timeout button for zero and for "guess"
		[DONE] auto focus slide timeout box in slide prop dialog
			
		[ON HOLD] intelligent merge (optimize) cross fades by comparing items from two slides and if none changed, then dont cross fade those items
			on hold because:
				- image backgrounds fade correctly (appear static) when duplicated - not sure how or why, but it looks find for now
					- it was with videos that it appears in correct, and we can probably hack it to look okay with videos without full merge support
				- on hold also because the algorithm, though it looks correct, was not achieving desired effect and I've put 2 hours into this already (more than its worth right now)
		
		[DONE] add black and clear buttons to song view control
			clear only shows background - so it works with any group type, as does fade to black
				
		[DONE] spacebar should change song slides
		[DONE] go-live should set focus to list view
			
		[DONE] integrate image functionality to background items
			
		[DONE] path in titlebar should only be file, not abs path
		[DONE] make keyboard movements snap to half-grid points
			harder than I thought, because kbd is done in mygraphicsscene, but snapping is done in abstract content
			need to set a flag maybe?
			this was finished back in r215(?) or somewhere in the last 5-10 revs, just forgot to mark it done
		
		[DONE] start video browser on using last video path - same for images
			remember across runs using AppSettings
			added AppSettings::previousPath() and related settor
			integrated functionality into GenericItemConfig
		
		[DONE] add seperator in mainwindow before trash group
		[DONE] set tooltip of toolbar icons in main and editor to include shortuct text (Ctrl+X or whatever)
			
		[DONE] Turn timer red when < 3 seconds (3...2...1)
		[DONE] Make timer label bold & larger

		[DONE] dialog titles on slide/group dialogs
		[DONE] show timeout as second line in slide list model
		[DONE] rename 2nd option in group dialog from "do nothing" to "loop"
		[DONE] move group options button further to right in editor		
		[DONE] add key accelerators to slide group options dialog
		[DONE] Auto-change slides/slide groups after X seconds
			added field in Slide.h, now to make SlideGroupViewer and UI honor the field (and SlideGroup::autoChangeGroup() flag in MainWindow)
		[DONE] add "sourceRect" attribute to visual item and delegates 
		[DONE] collapse <rect> and <pos> elements in the xml to use attributes rather than child elements
		[DONE] Need to add keyboard nudging/movement of items
		[DONE] Default shadow text should be black
		[DONE] right-click on slide list in editor to open slide config (incl'd bg config tab or btn to config bg)
			props like time to automatically switch slides, etc
			added toolbar item for it
		[DONE] in songeditor, be able to hit ESC to close
			- ALT+C instead
		[DONE] default background color should be gray or something "nicer" than black
			still start out live as black though
		[DONE] in editor, implement F5 (or similar key) to change Live to this group (if needed) and set this slide as current
		[DONE] Gausian blur shadows (start impl using QGraphicsEffects from 4.6, but performance is terrible, so I'll have to do some heavy optimizations before we can use it.)
			Implemented basic blur using code from qpixmapfilters.cpp, integrated into dviz in ImageFilters.cpp
			First implementation in TextBoxContent.cpp, included with very aggressive caching via QPixmapCache
			Started implementation in BoxContent.cpp, but paused to work on other features.
			Finished implementation and fixed issues in box content.
		[DONE] Per-verse custom slides - key to header OR passage#
				using slide templates, the change was trivial
		[DONE] Set Ctrl+Z/Ctrl+shift+z as undo/redo shortcuts
		[DPNE] Set default font size on new text items larger than 16pt
		[DONE] Add appros icons to slide editor window and mainwidnow
		[DONE] Close undostack or integrate as a dock into slideeditor
		[DONE] Change SlideEditor in SlideGroupFactory.h to inherit from QMainWindow, then change songeeditor to just set a central widget
		[DONE] When searching for song and press enter in text field, auto-add first song to list, 
		[DONE] Need to add form to config snap to grid
		[DONE] Need to integrate appsettings::thirdguidenabled to mygraphicscene
		[DONE] Test NOT specialcasing filltype now that we've added the Q_ENUMS macro
		[DONE] Group together add item commands in an undo group
				Moved the slide->addItem() call in MyGraphicsScene to after the basic name/id prop sets
		[DONE] Need to implement song editor
		[DONE] Look at setting char format thru cursor and using text document to render
		[DONE] In video content/bg: dont reject image if m_still is set UNLESS also has m_size>0 already
		[REJECTED] Need to change double click on song list to send straight to live
		[REJECTED] Add editing to slide group/slide model lists in the list itself (e.g. to change slide/group title)
		[LATER] Audio with videos
				Update QVideo to use QAudioOutput in qtmultimedia tree to play audio in video files
		[LATER] Master overlay - add "disable master overlay" to slide group option box
		[LATER] Script plugin item
		[LATER] In-flight edits
				need to add specific framework for this
				this could be done by cloning the slidegroup when set on the Live slidegroupviewer
				then when the slide is edited, press "F5" or whatever to send to viewer again
				however, the reason to have a "special key" to update viewer instead of live update (like PPT) in my mind was mainly for text items - so people dont see each keystroke on live output. 
				However, since text is edited in editor dialog THEN updated as a visually atomic transaction, a live-link between the editor is okay.
				However, remote dviz viewers will have to hook into the slideeditor window's closed() signal to send an updated slide group to the remote viewer OR listen for changes to props and send those changes over the wire
		[LATER] Crossfading slides with identical content seems to "dim" just slightly for a moment
				caused by fact that each items opacity fades individually on the scene so the bg "shows thru" the text until fully opaqe while crossfading
				possible fix: seperate fade roots for background content vs non-background content
				putting off for now inorder to get this release out the door
				this is more an asthetic preference right now - and an important one, but not a showstopper. More of an improvment I guess.
		[LATER] When searching for song and shift+enter, add song and  GO LIVE
				shift+enter will take a bit of work - would have to subclass QLineEdit and override keypressevent
		[LATER] Video Capture (started impl, but again, performance is terrible. That may be due to the FormatOpts specified, or in ffmpeg, or the capture hardware - need to trace - later!)
	
	- Bugs:
		video icons dont render the actual icon after loading if not already in disk cache
		
		overlay enable crashes if no group live
	
		[FIXED] crash on invalid overlay document:
			made box readonly
		[FIXED] should not check overlay document name while typing - only when finished
			made box readonly
		
		[FIXED] deleting last group in doc crashes
			patched documentlistmodel::internalsetup to not emit datachanged if slist is empty
		[FIXED] when going from song item live to regular slide live, the text-only filter checkbox doesnt get re-checked
			framework had to be updated to support this functionality
		
		when auto-size text is enabled on foldback, foldback doesnt display correct verse all the time - sometimes displays a different verse that what it should be showing
			cant repeat yet

		need to fix the hackish method of setting slide groups on synced outputs in MainWindow - needs to be cleaner!
		
		[FIXED] setting slide group overrides black/clear buttons - should not override
			reworked internals of SlideGroupViewer to accomidate
		
		[FIXED] experienced random crash when copying/pasting item but could not reproduce
			temporary fix: impl autosave (done)
			final fix: qDeleteAll does not clear a list - so I had to do m_copyBuffer.clear() after qDeleteAll - that fixed it.
		
		deleting m_doc in mainwindow::openfile causes segflt when golive with next group - why??
				
		cross fade on songs with video bg seems to lag
		
		[FIXED] clicking "next" and auto-going to first slide of next group when from normal slide to song, segfault 
				patched SlideGroupFactory / ViewControl / nextSlide to only toggleTimerState to stopped if timer is running
				
		editor undo/redo framework doesnt pickup slide property changes
		slide auto change time doesnt seem to save when using guess button
		
		clicking "no bg" in dialog doesnt clear background if it was image previously in editor
		[FIXED] adding slide in editor doesnt update list in live view control
			the OutputInstance proxy methods were not updating their list, and SlideItemListModel wasnt updatign correctly either
		
		[FIXED] if edit slide, go live, the edit again, the Live Slide List View pixmap does not regenerate
			dont remeber how - something to do with catching the change signal
			
		crossfading between videos of same bg (see r212 the "Dir Viz" slide - dup and then try cross fading) is hoorible performance!
			
		when dragging multiple-select items, only one item syncs back to the model - the others dont
				as evidenced when the slide is live, drag multiple items, only one moves in live view
		during resize, image shadow doesnt scale
		When setting live from editor (and other times?) and the group changes, need to change selected group in document list model
			
		items modified in editor dont correctly "start out" in lvie view or icons
				see photos, blue box
				seems to be the changes dont always get synced back to model item (position, size)
				now it updates live when editing, but goint to diff slide then going back - starts at old position
		using toolbar, set font size to 1pt, zoom in so text is in view (blob of black), and then press "up size" btn - segfault
		close all open editors on closing mainwindow
		Rotating a boxcontent causes very wierd pen width scaling issues in previews
		Need better method of managing song regexps - right now the filters exist in the pixmap generation routines, the editor window, and the slide group!!
		
		[CONFIRMED EDGE CASE] On windows, when setting video item live, it doesnt play unless you dbl-click the slide again
				other fixes (below) may have fixed this - need to confirm
				CONFIRM still broken on the .mpg video as of rev211 - test.xml, first group, third slide
					first two slides play videos fine (.mov) (slides auto change on timer)
					but when the third slide playes (data/s..loop..3.mpg), it doesnt start video first time around 
					video plays fine when group loops back through
					this only happens FIRST time, and only righ after program launch
					even opening/closing test.xml and reopening doesnt reproduce - video playes fine
				
		[ON HOLD] If blank document "<document/>", crash when add group then click group
				doesnt crash any more, but qpainter reports all sorts of errors on console when trying to render the icon and the group never goes live
				this would be considered a corrupt file and right now I dont have a gracious way of detecting this
				however, we must handle corrupt files to some extent
					preferably, detect the file is corrupt and refuse to load 
					
		[ON HOLD] qt4.6b-win32: Adding a new video item or changing filename of existing item causes program crash
				not using qt4.6b on windows right now - staying with 4.5.3, and 4.5 doesnt have this problem
		
		
		[FIXED] automatic enabling of foldback sync with live doesnt seem to be working (see OutputControl::setOutputInstance)
			it was working, just not setting the combobox indes
		[FIXED] foldback display already set to text-only filter before requested
			wasnt initalizing status variables in constructor, so this was due to corrupt memory in the boolean flags
		[FIXED] output control doesnt set live widget control on app init - must set ;live group to set view control
		[FIXED] need to default text bg on textonly slides to black
		[FIXED] clicking slide in live after setting up sync causes segflt
	
		[FIXED] foldback sync with filters causes crash
			steps to reproduce:
				live
				select song
				go to foldback
				set sync
				turn on filter and resize
				go back to live
				select slide
				select non-song slide
				select song again
				crash
			notes:
				must have filters on
				must select another slide after turning on filters
				
			had to do with disconnecting from m_ctrl when calling setViewControl -bypassed it by using our own sig/slot for the buttons and proxying the calls

		[FIXED] slide editor crashes right after opening editor (eg press F2, editor becomes visible, crash) with new OutputInstance class integrated into code base
			UPDATE: doesnt sigsegv on CentOS5 - seems to me it might be the test data I'm using at the office. I patched the method indicated below anyway
				at SlideItemListModel.cpp:29 to confirm that both a & b ptrs are valid (non null) - we'll see if that fixes it when returning to the office.
			UPDATE:
				seems fixed on original system - not sure of cause.
		
		[FIXED] qt4.6b-win32: chaing document aspect ratio doesnt affect slide editor until program restart
				should be fixed thanks to changes made below .. i think
				done a while ago
		[FIXED] Perfomance of the document pixmap model generator becomes a problem with a lot of songs - need to investigate - possibly use different cache key
				changed caching to cache on ptr value instead of row #
				
		[FIXED] deleting one song group shouldnt change sort order of anboth3r!
			old bug, just putting down here. Fixed it last night.
		[FIXED] song editor NEW/EDIT not saving
			old bug, just putting down here. Fixed it last night.
		
		[FIXED] Slides jump to wrong slide: to repeat: song-test.xml, go live with song, click verse 3, jumps to verse 4
				remove extrenuous connection to QListView entered() signal - originally designed to catch selection changes by keypress, but that never worked
				this seemed to be what caused the errant slide changes
			
		[FIXED] Opening song-test.xml after test.xml is open, go live with song: First slide is gray box, 3rd slide is "welcome phc" (from test.xml) on blue bg instead of verse
			fixed gray box (modded removeAllSlides function in song slide group)
			*seems* to be working, but I think it has to do with the pixmap cache of the textbox. Need to clear cache on destruction of item
			updated AbstractContent to dirty cache on descruction
			cannot repeat problem any more, asuming fixed
		[FIXED] Opening document with songs in them, click song, crash with index out of range/ slide group has no slides
		[FIXED] when no slide is live, clicking then UNclicking "Black" btn causes segflt
		[FIXED] black and clear buttons need to pause timer	
		[FIXED] slide item list in editor doesnt add items to the list until slide model set again
				hacked it by just setting the model again on the item list when a new item is added
		[FIXED] when closing and have not saved yet, first ASK if they want to save before showing save as dialog
				updated mainwindow closeEvent() to prompt
		[FIXED] kbd movement needs to move all items in the selection stack
				just an algorithmic code change
		
		[FIXED] new items STILL not going on top
				need probably to check z vals of fade roots
				redesigned the new item algorithims in mygraphicscene to only add to slide and let the sig/slot events add to the scene
		[FIXED] going live with a song takes too long - need to make < .25 second
				or a slide - both take a while
				large song (Amazing grace - praise song) takes > 3 - 5 seconds
				time seems to be in the pixmap generation - need better caching
				for songs: cached generated pixmaps based on passage text and disabled the call to the parent generate pixmap in SlideGroupListModel 
		[FIXED] large image items (original file size) makes image items take long time to repaint, which reduces responsiveness of UI
				for Editor, maybe scale image down at time of load and only repaint that, rather than scale on every repaint
				or scale once when contents rect changes
				had to do with loading times when model item changed
					had to cache the loaded pixmap, NOT the scaled pixmap
		[FIXED] win32: File->New crashes
				probably fixed, need to verify 
				Nope! Still need work.
				Crashes even with non-live items
				Confirmed that it "new" works on linux tho - need to debug on windows then - drats
				confirmed it still "doesnt work" as of 10-16
					freezes program
				confirmed it DOES work as of 10-16 on *linux*
				should work now with code changes (releaseDocument() method added)
				it works now! 10-17-09
		[FIXED] Open file crashes
				crashes on both win32 and linux
				should work now with code changes (releaseDocument() method added)
				it works now! 10-17-09
		[FIXED] = Show Stoppers =
			[FIXED] file open crashing
				fixed crashing
			[FIXED] now opening multislide file only show first group
				had to call begin/end remove rows in the model
			[FIXED] file new crashing
				possibly related to the other crashing of file->open - added releaseDocument() to doc list model
				works - 10-17-09
			[FIXED] file open doesnt adjust AR in editor correctly
			[FIXED] jpeg problems on windows
				check if building in debug or release mode
				not sure what was the problem - jpegs work fine in windows
				large (>1MB) jpegs take a while to render (>.1 sec) due to time it takes to scale
				see bug report above - need to optimize rendering, cache scaled versions
		[FIXED] if you start a group live that has an timer on it, and switch groups to another one without pausing the timer, segfault when first timer expires
				not sure why, the timer is stopped but it still fires! Reported on qt-interest at 2009-10-16 17:08 - we'll see what response we get
				suggestion made to use internal locking variable - will try
				had to delete the original view control when chaging factories
		[REJECTED] when zooming in on text using mouse wheel, it doesn't re-render for new scale  
				due to live performance that the caching improves, I'm not going to "fix" this right now
		[FIXED] Text editor in slide still white sometimes
				made it so modified text in box content doesnt ever sync to model item
				text config box sets text on model item instead and sync up
		[FIXED] when adding new item, set selected
		[FIXED] boxcontent should not offset by pen width
		[FIXED] svg needs to scale as contents rect is resized
		[FIXED] when fading betwen verses in songs, takes too long to render blurred shadows - need to default song shadows to 0 radius or make faster rendering (pre-render?)
				tuned the render cache (an edge case was introduced last night causing slide text to clear the cache every time the delegate was re-created)
				performance could still be better, but it seems acceptable for now
		[FIXED] video still randomly pausing when switching slides in editor or going live
				Adjusted SlideGroupViewer's video provider handling, adjusted the order of play/setpixmap calls in background content and video file content
		[FIXED] adding items to slides doesnt put them on top (need to check on z order)
				for some reason, the m_content array in MyGraphicsScene was showing empty(), so I used the QGraphicsScene::items() method to get list of items for zvalue cals instead
		[FIXED] Backgrounds in per-verse slides dont work consistently (sometimes override, sometimes master shows thru)
				I think its because both BackgroundContent items (from master and child) are added to final slide 
				need to remove master bg if one in child
				could not preproduce on linux, but I applied the assumed fix anyway - remove master bg if child slide has a bg
		[FIXED] Visual item's QColor toxml routines dont save alpha channel!
				modified routines in AbstractVisualItem to save qcolor as a explicit csv-list of rgba values instead of a uint-cast .rgba() value
		[FIXED] Undo/redo of shadow enabled on text box doesn't seem to work
				typo of the property name - fixed the Q_PROPERTY's property name and its all good now
		[FIXED] F2 with no slidegroup selected in main screen - segfault
				Checked idx.isValid() in actionEditGroup() and actionDelGroup()
		[FIXED] Add slide, add box, delete slide, undo delete slide, move box - segfault
				not sure exactly what fixed it - I really dont. Somewhere in the last 2 svn revs it was fixed.
		[FIXED] Adding an item to an slide that was removed then readded causes segfault
				not sure exactly what fixed it - I really dont. Somewhere in the last 2 svn revs it was fixed.
		[FIXED] Undoing "del slide" causes segfault (e.g. trying to re-add slide using undo after deleing the slide)
				slideeditorwindow was doing 'delete slide' at end of the slot that removed the slide
				moved the delete slide to the destructor of UndoSlideRemoved action
		[FIXED] Undo "add slide" removes the wrong slide!
				logic error - I gave the wrong slide to the UndoSlideAdded action
		[FIXED] Undo item add never removes the item (goes back to add item, just doesnt remove it)
				for some reason, we have to call m_window->scene()->removeVisualDelegate() explicitly in the UndoSlideItemAdded::undo() handler
		[FIXED] Undo of item removal doesn't work corectly
				undo item removal works now - just swapped method calls around in the command
		[FIXED] Undo/redo of change fill type doesn't work - probably need to cast to/from int
				had to special-case the fillType field in the UndoSlideItemChanged command
				seems QObject::setProperty() never called the property writer for fillType, my guess is because fillType is a custom enum
				Fixed: had to call Q_ENUMS(FillType) after the Q_PROPERTY declerations - now I don't need to special case filltype - yay!
		[FIXED] "Lower" btn in config doesnt propegate to live view
				due to not syncing to model in the qgraphicsitem propchanged event, zvalue wasnt being sent to model
				changed MyGraphicsScene (which handles the z value changing) to update content->modelItem(), which would then propogate to the visual
		[FIXED] Need to ignore height of song textbox in template
				Fixed underlying problem - Compensated by enlarging textbox if needed, but not shrinking textbox
		[FIXED] Editing text doesnt update slide editor slide until close editor and reopen
				had to delete cached rendered text pixmap (delete m_text and update graphics, regenerating cached pixmap)
		[FIXED] In SongGroup, define "first textbox" by z value - current def is too arbitrary (relies on order of items added)
		[FIXED] In item config dialog, video "play" button does nothing - hide for later revs
		[FIXED] Starting new results in incorrect AR for "new" doc - doc should adopt current live AR
				Added liveAspectRatio method to app settings and routines to search outputs by tag
		[FIXED] When starting with no document (test.xml), closing program results in "cannot write to ''" (should prompt to save as)
				Do saveFile in closeEvent, check for empty filename, prompt saveas, if cancel saveas, then dont accept close event
		[FIXED] File->New with item on live output item crashes dviz
				the releasegroup method caused currentChanged signal, which caused the view control to try to change slides while group was being released
				just added bool lock flag so when releasegroup was called, the signal that listened for currentchanged would ignore signals
		[FIXED] Document list icons need to be lot smaller
				Changed initial icon size in DocumentListModel from 192 to 48
		[FIXED] Shadow option has no effect on box object - either remove tab or enable shaodw
				enabled basic shadow rendering - no gausian blur yet
		[FIXED] Turning on/off line has no effect on box 
		[FIXED] Turning on/off bg has no effect on box
				made BoxContent honor fillEnabled/outlineEnabled flags
		[FIXED] Changing AR doesn't resize background elements of slides in document - probably should automatically
				updated BackGround content to listen for a 'sceneRectChanged()' signal from MyGraphicsScene
		[FIXED] text config box text is white - maybe need to get html from model item for editing??
				adjusted textconfig dialog to load/save text to model and rely on sync signals to load text to visual delegate
		[FIXED] Song cross fade / go live performance is terrible
				converted text layout to use Qt's QTextDocument after learning how to set text output pen
		[HACK-FIX] Slide editor -> new slide doesnt show slide in list model again!
				hacked by doing a calling m_editWin->setSlideGroup(group); before AND after showing the edit window - doesnt seem right, but it works
		[FIXED] When go live, auto select the current live slide
				simple code change to set currentIndex
		[WORKSFORME] Slide in icon preview for slide group isnt always the first slide
				not sure where I saw this, but can't repeat
		[FIXED] When changing output size with custom output, output disappers until program restart
				simply called setVisible on outputs after closing the output dialog
		[FIXED] When using 1.6AR, content locations centered in slide editor appear off center in preview and live (but correct in icons)
				it was actually the slideditor window that was wrong (and the live view) because both were created before the document was loaded
		[FIXED] Somtimes going live with video item it doesnt play
				had to do with QVideoProvider's internal play/pause counter
		[FIXED] When setting video in slide editor, it never shows first frame
				had to do with QVideoProvider's internal play/pause counter
		[FIXED] Video slides crashing when made live on Win32
		[FIXED] When changing AR, reload document (or recreate slides)
		[FIXED] Songs need to be vertically centered as well
		[FIXED] Cross fading text with shadows shows ugly "dark" text during crossfade - need to investigate clipping shadow to only visible part of painter path
		[FIXED] When dbl click on a FILTERED song list, the song clicked comes from the UNFILTERED list (e.g. its not the song clicked)
		[FIXED] Major problems with song list display
		[FIXED] Song Text not being layed out properly with the "center" functionality (text being clipped, etc) - Can't use <br> tags I fond out.
		[HACK-FIX] Song slide preview has lines that are "too thick"
		[FIXED] Song text on output is too far to the top-left (but preview is fine) - aspect ratio was set wrong and had to adjustViewScaling when chaged
		[FIXED] Need to set item name in slide generator for songs
		[FIXED] Need to set item id in slide generator
		[FIXED] Songs aren't being converted toXml properly (is toXml virtual??)
				needed to match the function signatures exactly - in this case, toXml was missing the 'const' from the original defn
		[FIXED] When another slide live first, then trans to video slide, single click (preview) different slide, the live item stops playing
		[FIXED] Centered TextBox items appear too far to the left in icon previews (list models, etc)
		[FIXED] Setting config on background item causes it to "go away" until program reload
		[FIXED] Output Dialog should have all tabs on left disabled until output selected, otherwise SIGSEGV if user clicks screen list before selecting output
		[FIXED] new slide button stopped working
		[WORKSFORME] slide editor crash when add box then delete box
		[FIXED] slide listbox cant scroll down below the fold
		[WORKSFORME] figure out why some items (VideoFileContent for now) jumps position vertically when slide changes
		[FIXED] figure out why mirror item doesnt get repainted when slide changed back
		[FIXED] turn off multi-select unless intentional - looks like if one item selected, then right-click on another item, it selects both items
		[FIXED] repaint bug -see textitem - when textobx selected and hover over other content, bg in text box turns white...why?
		[FIXED] (r86) -since textbox clipping has been turned on, need to keep all text inside content rect - add margin or something to layout - see letter "L" in tahoma at start of a box


513-584-1000
neural intesive care unit


Release 0.1b
----
	Specs:
	------
		x Basic Editor with support for:
			x Slides
				Basic Timeline
				x Visual Items
					# Video Files
					Pictures
					# Text
			x Slide Groups
				Basic SG Timeline
		# Internal Slide Model
		# Basic Stringification Support
		# Save/Load Support
		x  Basic Viewer
			# Load Slide Groups 
			Execute Timeline and Slides
			Listen for Re-Publish Event from Editor
			
		x Main Components:
			x Slide Group Editor
			# Playlist Selector
			# Preview Pane
			Live Control Pane
			x Viewer Window
		
	Milestones:
	-----------
	
		Milestone A - Target 10:30pm 2009-09-06
		----
			# Port FotoWall AbstractContent Items
			# Create Editor Canvas Framework
			# Editor Canvas
				# Resizable Items
				# Properties Window
			
		Milestone B - Target 10:30pm 2009-09-07
		----
			# Slide Model / Item Model
			# Slide Group Model
			# Load/Save Framework for slides, items, slide groups, slide templates
			# Adapt abastractconfig to top-level widget
			
		Milestone C - Target 10:30pm 2009-09-08
		----
			# Code to translate model to GraphicsView
			# Slide Template Model 
			# Revert to old CornerItems
			# Create TextBox Item 
			# Basic Editor (toolbar with items, click, add to canvas)
			# Basic Viewer for Model
			*** Editor Publish Update
			
		Milestone D - Target 10:30pm 2009-09-10
		---
			# Slide Group
			*** Timeline Widget
			*** Transitions
		
		Milestone E - Target 10:30pm 2009-09-13
		---
			Prep for Release 0.1b
			Documentation
			Test Cases
			Sample Data
			Performance Tests

Release 0.2 - Target 2009-09-16
---
	Slide Group Visual Elements
	# Playlist Model
	Viewer Control Panel
	Effects for Text and Photos
	
Relase 0.3 - Target 2009-09-23
---
	Timeline Enhancements
		- Cursor Control Items
			(jump/loop/pause/wait/sync to other)
		- Send Sync Signal
	Non Visual Items
		Basic Script Element
		System Exec
		Basic Audio Support
		Timeline Control Element
		
Release 0.4 - Target 2009-09-30
---
	* Multiple Outputs
	Slide "Filter" for say, rear, output
	Output selection/control UI
		sync to main / custom Slide Group
	# Preview windows for each output dockable

Release 0.5 - Target 2009-10-14
---
	Networkable Viewer (control from main or control on remote, sync to main)
	Audio in Videos
	Network Video Feeds
	Network Feed from Remote DViz 
	Live Video Camera Item
	
Release 0.6 - Target 2009-10-21
---
	Visual Polish
		Transitions (3d/2d)
		Image/Element Effects

Release 0.7 - Target 2009-11-04
---
	DViz Control Enhancments
		Songs Support
			- may need to move up in schedule
		Bible Support
		News Ticker
		Blank/Clear Buttons
			- should be fairly easy to do blank
			- clear requires more abstraction of items
		Date/Time Item
		Video Folders
		Image Folders

Release 0.8 - Target 2009-11-18
---
	Remote Control API
	Remote Control Web Page for Smart Phones
	Touch Screen Interface for Song Leader Control
	Keypad Clicker Support for Stage Remotes
	
Release 0.9 - Target 2009-11-25
---
	DViz Control View Rework and Polish
	Bug Testing
	Extensive Documentation
	Preview Release Online
	
Release 1.0 - Target 2009-12-09
---
	Public Release
	$99 for Basic (Simple Editor/Playlist/Viewer/Multi Outputs)
	$199 for Profesional (Network Viewer/Multiple Viewers Sync over Network/Stream over Network/Song Leader Control UI)
	
----------------------------------------------------
Future Release Feature Sets contingent upon feedback
----------------------------------------------------

